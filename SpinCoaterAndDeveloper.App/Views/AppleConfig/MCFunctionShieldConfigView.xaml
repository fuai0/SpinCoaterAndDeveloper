<UserControl
    x:Class="SpinCoaterAndDeveloper.App.Views.MCFunctionShieldConfigView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:bp="clr-namespace:PrismAutomationPlatformExt;assembly=PrismAutomationPlatformExt"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:listboxEx="clr-namespace:PrismAutomationPlatformExt;assembly=PrismAutomationPlatformExt"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:vc="clr-namespace:ValueConverters;assembly=ValueConverters"
    xmlns:viewmodels="clr-namespace:SpinCoaterAndDeveloper.App.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:MCFunctionShieldConfigViewModel}"
    d:DesignHeight="700"
    d:DesignWidth="1280"
    prism:ViewModelLocator.AutoWireViewModel="True"
    mc:Ignorable="d">
    <UserControl.Resources>
        <bp:BindingProxy x:Key="BindingProxy" Data="{Binding}" />
        <vc:BoolToStringConverter
            x:Key="BoolToStringConverter"
            FalseValue="Disable"
            TrueValue="Enable" />
    </UserControl.Resources>
    <materialDesign:DialogHost>
        <materialDesign:DrawerHost IsRightDrawerOpen="{Binding IsRightDrawerOpen}">
            <materialDesign:DrawerHost.RightDrawerContent>
                <ScrollViewer VerticalScrollBarVisibility="Hidden">
                    <DockPanel
                        Width="300"
                        Margin="10,10"
                        VerticalAlignment="Top"
                        LastChildFill="False">
                        <DockPanel.Resources>
                            <Style BasedOn="{StaticResource MaterialDesignTextBox}" TargetType="{x:Type TextBox}">
                                <Setter Property="Margin" Value="5,5,5,0" />
                                <Setter Property="Padding" Value="0" />
                            </Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Margin" Value="5,5,5,0" />
                            </Style>
                        </DockPanel.Resources>
                        <TextBlock DockPanel.Dock="Top" Text="{DynamicResource Name}" />
                        <TextBox
                            materialDesign:HintAssist.Hint="{DynamicResource MustAndUniqueHint}"
                            DockPanel.Dock="Top"
                            Text="{Binding NewFunctionShield.Name}" />
                        <TextBlock DockPanel.Dock="Top" Text="{DynamicResource EnterCNName}" />
                        <TextBox DockPanel.Dock="Top" Text="{Binding NewFunctionShield.CNName}" />
                        <TextBlock DockPanel.Dock="Top" Text="{DynamicResource EnterENName}" />
                        <TextBox DockPanel.Dock="Top" Text="{Binding NewFunctionShield.ENName}" />
                        <TextBlock DockPanel.Dock="Top" Text="{DynamicResource EnterVNName}" />
                        <TextBox DockPanel.Dock="Top" Text="{Binding NewFunctionShield.VNName}" />
                        <CheckBox
                            Margin="2,5,5,0"
                            Content="{DynamicResource FunctionShield_IsActive}"
                            DockPanel.Dock="Top"
                            IsChecked="{Binding NewFunctionShield.IsActive}" />
                        <CheckBox
                            Margin="2,5,5,0"
                            Content="{DynamicResource FunctionShield_EnableOnUI}"
                            DockPanel.Dock="Top"
                            IsChecked="{Binding NewFunctionShield.EnableOnUI}" />
                        <TextBlock DockPanel.Dock="Top" Text="{DynamicResource Group}" />
                        <ComboBox
                            Margin="5,0,5,0"
                            HorizontalContentAlignment="Center"
                            DockPanel.Dock="Top"
                            IsEditable="True"
                            ItemsSource="{Binding FunctionShieldGroupCollection}"
                            Text="{Binding NewFunctionShield.Group}" />

                        <TextBlock DockPanel.Dock="Top" Text="{DynamicResource Remark}" />
                        <TextBox DockPanel.Dock="Top" Text="{Binding NewFunctionShield.Backup}" />
                        <Button
                            Margin="5,5,5,0"
                            Command="{Binding AddFunctionShieldCommand}"
                            Content="{DynamicResource Add}"
                            DockPanel.Dock="Top" />
                    </DockPanel>
                </ScrollViewer>
            </materialDesign:DrawerHost.RightDrawerContent>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="4*" />
                </Grid.ColumnDefinitions>
                <Grid Margin="0,0,2,0" Background="{StaticResource AppleHeavyBackGroundBrush}">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <ListBox
                        DisplayMemberPath="Name"
                        ItemsSource="{Binding FunctionShieldCollection}"
                        SelectedItem="{Binding CurrentSelectFunctionShield}" />
                    <StackPanel Grid.Row="1" Margin="0,8,0,0">
                        <Grid Margin="4,0,4,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="4*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                Margin="0,0,2,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontSize="14"
                                Text="{DynamicResource SelectGroup}" />
                            <ComboBox
                                x:Name="FunctionShieldSelect"
                                Grid.Column="1"
                                Margin="2,0,0,0"
                                Padding="0"
                                HorizontalContentAlignment="Center"
                                ItemsSource="{Binding FunctionShieldGroupCollection}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="SelectionChanged">
                                        <i:InvokeCommandAction Command="{Binding GroupChangedCommand}" CommandParameter="{Binding ElementName=FunctionShieldSelect, Path=SelectedValue}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </ComboBox>
                        </Grid>
                        <UniformGrid Margin="4,8,4,0" Columns="2">
                            <Button
                                Margin="0,0,2,0"
                                Padding="0"
                                Command="{Binding ShowAllFunctionShieldCommand}"
                                Content="{DynamicResource ShowAll}" />
                            <Button
                                Margin="2,0,0,0"
                                Padding="0"
                                Command="{Binding AddFunctionShieldCfgCommand}"
                                Content="{DynamicResource Add}" />
                        </UniformGrid>
                        <UniformGrid Margin="4,8,4,0" Columns="2">
                            <Button
                                Margin="0,0,2,0"
                                Padding="0"
                                Command="{Binding DeleteFunctionShieldCommand}"
                                Content="{DynamicResource Delete}"
                                Foreground="{StaticResource SecondaryAccentForegroundBrush}" />
                        </UniformGrid>
                        <UniformGrid Margin="4,8,4,8" Columns="2">
                            <Button
                                Margin="0,0,2,0"
                                Padding="0"
                                Command="{Binding SaveSelectedFunctionShieldCommand}"
                                Content="{DynamicResource KeepSelected}" />
                            <Button
                                Margin="2,0,0,0"
                                Padding="0"
                                Command="{Binding SaveAllFunctionShiledCommand}"
                                Content="{DynamicResource SaveAll}" />
                        </UniformGrid>
                    </StackPanel>
                </Grid>
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Border
                        Grid.Row="0"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        Margin="2,0,0,2"
                        Background="{StaticResource AppleHeavyBackGroundBrush}"
                        CornerRadius="0">
                        <DataGrid
                            materialDesign:DataGridAssist.CellPadding="10 2 10 2"
                            materialDesign:DataGridAssist.ColumnHeaderPadding="10 2 10 2"
                            materialDesign:DataGridAssist.SelectedCellBorderBrush="Transparent"
                            AutoGenerateColumns="False"
                            Background="{StaticResource AppleHeavyBackGroundBrush}"
                            CanUserAddRows="False"
                            CanUserSortColumns="False"
                            ColumnWidth="*"
                            HeadersVisibility="All"
                            IsReadOnly="True"
                            ItemsSource="{Binding FunctionShieldCollection}"
                            RowHeaderWidth="1"
                            ScrollViewer.VerticalScrollBarVisibility="Visible"
                            SelectedItem="{Binding CurrentSelectFunctionShield}"
                            SelectionMode="Single">
                            <DataGrid.Resources>
                                <Style
                                    x:Key="DataGridColumnHeaderStyle"
                                    BasedOn="{StaticResource MaterialDesignDataGridTextColumnStyle}"
                                    TargetType="{x:Type TextBlock}">
                                    <Setter Property="HorizontalAlignment" Value="Center" />
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                </Style>
                                <Style
                                    x:Key="DataGridColumnElementStyleDefine"
                                    BasedOn="{StaticResource MaterialDesignDataGridTextColumnStyle}"
                                    TargetType="{x:Type TextBlock}">
                                    <Setter Property="HorizontalAlignment" Value="Center" />
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                </Style>
                                <Style
                                    x:Key="DataGridColumnCellTemplateHeaderDefine"
                                    BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}"
                                    TargetType="{x:Type DataGridColumnHeader}">
                                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                                </Style>
                                <Style
                                    x:Key="DataGridColumnCellTemplateTextBoxDefine"
                                    BasedOn="{StaticResource MaterialDesignTextBox}"
                                    TargetType="TextBox">
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                    <Setter Property="Block.TextAlignment" Value="Center" />
                                </Style>
                            </DataGrid.Resources>
                            <DataGrid.Columns>
                                <DataGridTextColumn Binding="{Binding Name, Mode=OneWay}" ElementStyle="{StaticResource DataGridColumnElementStyleDefine}">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource Name}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding CNName, Mode=OneWay}" ElementStyle="{StaticResource DataGridColumnElementStyleDefine}">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource CNName}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding ENName, Mode=OneWay}" ElementStyle="{StaticResource DataGridColumnElementStyleDefine}">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource ENName}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding VNName, Mode=OneWay}" ElementStyle="{StaticResource DataGridColumnElementStyleDefine}">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource VNName}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn
                                    Binding="{Binding IsActive, Mode=OneWay, Converter={StaticResource BoolToStringConverter}}"
                                    ElementStyle="{StaticResource DataGridColumnElementStyleDefine}"
                                    IsReadOnly="True">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource FunctionShield_IsActive}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                    <DataGridTextColumn.CellStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridCell}" TargetType="DataGridCell">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsActive}" Value="True">
                                                    <Setter Property="Foreground" Value="{StaticResource SecondaryAccentBrush}" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding IsActive}" Value="False">
                                                    <Setter Property="Foreground" Value="{StaticResource SecondaryAccentForegroundBrush}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </DataGridTextColumn.CellStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn
                                    Binding="{Binding EnableOnUI, Mode=OneWay, Converter={StaticResource BoolToStringConverter}}"
                                    ElementStyle="{StaticResource DataGridColumnElementStyleDefine}"
                                    IsReadOnly="True">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource FunctionShield_EnableOnUI}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                    <DataGridTextColumn.CellStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridCell}" TargetType="DataGridCell">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding EnableOnUI}" Value="True">
                                                    <Setter Property="Foreground" Value="{StaticResource SecondaryAccentBrush}" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding EnableOnUI}" Value="False">
                                                    <Setter Property="Foreground" Value="{StaticResource SecondaryAccentForegroundBrush}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </DataGridTextColumn.CellStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding Group, Mode=OneWay}" ElementStyle="{StaticResource DataGridColumnElementStyleDefine}">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource Group}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding Backup, Mode=OneWay}" ElementStyle="{StaticResource DataGridColumnElementStyleDefine}">
                                    <DataGridTextColumn.HeaderStyle>
                                        <Style BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}" TargetType="{x:Type DataGridColumnHeader}">
                                            <Setter Property="Content" Value="{DynamicResource Remark}" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                </DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <ScrollViewer
                        Grid.Row="1"
                        Grid.Column="0"
                        Margin="2,2,2,0"
                        Background="{StaticResource AppleHeavyBackGroundBrush}">
                        <Grid>
                            <Grid.Resources>
                                <Style BasedOn="{StaticResource MaterialDesignTextBlock}" TargetType="TextBlock">
                                    <Setter Property="Margin" Value="0,0,5,0" />
                                    <Setter Property="HorizontalAlignment" Value="Right" />
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                </Style>
                                <Style BasedOn="{StaticResource MaterialDesignTextBox}" TargetType="TextBox">
                                    <Setter Property="Margin" Value="5,0,0,0" />
                                    <Setter Property="VerticalAlignment" Value="Center" />
                                    <Setter Property="Block.TextAlignment" Value="Center" />
                                    <Setter Property="Padding" Value="0" />
                                </Style>
                            </Grid.Resources>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width="3*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="0"
                                Text="{DynamicResource Name}" />
                            <TextBox
                                Grid.Row="0"
                                Grid.Column="1"
                                Text="{Binding CurrentSelectFunctionShield.Name, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="0"
                                Text="{DynamicResource CNName}" />
                            <TextBox
                                Grid.Row="1"
                                Grid.Column="1"
                                Text="{Binding CurrentSelectFunctionShield.CNName, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="0"
                                Text="{DynamicResource ENName}" />
                            <TextBox
                                Grid.Row="2"
                                Grid.Column="1"
                                Text="{Binding CurrentSelectFunctionShield.ENName, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="0"
                                Text="{DynamicResource VNName}" />
                            <TextBox
                                Grid.Row="3"
                                Grid.Column="1"
                                Text="{Binding CurrentSelectFunctionShield.VNName, UpdateSourceTrigger=PropertyChanged}" />
                            <TextBlock
                                Grid.Row="4"
                                Grid.Column="0"
                                Text="{DynamicResource FunctionShield_IsActive}" />
                            <CheckBox
                                Grid.Row="4"
                                Grid.Column="1"
                                IsChecked="{Binding CurrentSelectFunctionShield.IsActive}" />
                            <TextBlock
                                Grid.Row="5"
                                Grid.Column="0"
                                Text="{DynamicResource FunctionShield_EnableOnUI}" />
                            <CheckBox
                                Grid.Row="5"
                                Grid.Column="1"
                                IsChecked="{Binding CurrentSelectFunctionShield.EnableOnUI}" />
                            <TextBlock
                                Grid.Row="6"
                                Grid.Column="0"
                                Text="{DynamicResource Group}" />
                            <ComboBox
                                Grid.Row="6"
                                Grid.Column="1"
                                Margin="5,0,0,0"
                                Padding="0"
                                HorizontalContentAlignment="Center"
                                IsEditable="True"
                                ItemsSource="{Binding FunctionShieldGroupCollection}"
                                Text="{Binding CurrentSelectFunctionShield.Group}" />
                            <TextBlock
                                Grid.Row="7"
                                Grid.Column="0"
                                Text="{DynamicResource Remark}" />
                            <TextBox
                                Grid.Row="7"
                                Grid.Column="1"
                                Text="{Binding CurrentSelectFunctionShield.Backup, UpdateSourceTrigger=PropertyChanged}" />
                        </Grid>
                    </ScrollViewer>

                    <Border
                        Grid.Row="1"
                        Grid.Column="1"
                        Margin="2,2,0,0"
                        Background="{StaticResource AppleHeavyBackGroundBrush}">
                        <Border
                            Margin="4"
                            BorderBrush="{StaticResource ApplelHeavyTextForegroundBrush}"
                            BorderThickness="1"
                            CornerRadius="5">
                            <ListBox ItemsSource="{Binding MessageList}">
                                <ListBox.ContextMenu>
                                    <ContextMenu DataContext="{Binding Data, Source={StaticResource BindingProxy}}">
                                        <MenuItem
                                            Command="{Binding MsgClearCommand}"
                                            Header="{DynamicResource ClearLog}"
                                            Icon="{materialDesign:PackIcon Kind=Close}" />
                                        <MenuItem
                                            Command="{Binding OpenLogDirectoryCommand}"
                                            Header="{DynamicResource OpenLog}"
                                            Icon="{materialDesign:PackIcon Kind=FolderSearchOutline}" />
                                    </ContextMenu>
                                </ListBox.ContextMenu>
                                <i:Interaction.Behaviors>
                                    <listboxEx:ListBoxScrollToBottomExtensions />
                                </i:Interaction.Behaviors>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <TextBlock Text="{Binding Time, StringFormat={}{0:HH:mm:ss:}}" />
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                Text="{Binding Text}"
                                                TextWrapping="Wrap" />
                                        </DockPanel>
                                        <DataTemplate.Triggers>
                                            <DataTrigger Binding="{Binding Path=Degree}" Value="INFO">
                                                <Setter Property="ListBoxItem.Foreground" Value="Black" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Degree}" Value="DEBUG">
                                                <Setter Property="ListBoxItem.Foreground" Value="Black" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Degree}" Value="WARN">
                                                <Setter Property="ListBoxItem.Foreground" Value="{StaticResource MessageOrangeBrush}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Degree}" Value="ERROR">
                                                <Setter Property="ListBoxItem.Foreground" Value="{StaticResource MessageRedBrush}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Degree}" Value="FATAL">
                                                <Setter Property="ListBoxItem.Foreground" Value="{StaticResource MessageRedBrush}" />
                                            </DataTrigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </Border>
                    </Border>
                </Grid>
            </Grid>
        </materialDesign:DrawerHost>
    </materialDesign:DialogHost>
</UserControl>
