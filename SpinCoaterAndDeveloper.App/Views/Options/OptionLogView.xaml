<UserControl
    x:Class="SpinCoaterAndDeveloper.App.Views.OptionLogView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:bp="clr-namespace:PrismAutomationPlatformExt;assembly=PrismAutomationPlatformExt"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:listboxEx="clr-namespace:PrismAutomationPlatformExt;assembly=PrismAutomationPlatformExt"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:viewmodels="clr-namespace:SpinCoaterAndDeveloper.App.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:OptionLogViewModel}"
    d:DesignHeight="700"
    d:DesignWidth="1280"
    prism:ViewModelLocator.AutoWireViewModel="True"
    mc:Ignorable="d">
    <UserControl.Resources>
        <bp:BindingProxy x:Key="BindingProxy" Data="{Binding}" />
    </UserControl.Resources>
    <ListBox ItemsSource="{Binding MessageList}">
        <ListBox.ContextMenu>
            <ContextMenu DataContext="{Binding Data, Source={StaticResource BindingProxy}}">
                <MenuItem
                    Command="{Binding MsgClearCommand}"
                    Header="{DynamicResource ClearLog}"
                    Icon="{materialDesign:PackIcon Kind=Close}" />
                <MenuItem
                    Command="{Binding OpenLogDirectoryCommand}"
                    Header="{DynamicResource OpenLog}"
                    Icon="{materialDesign:PackIcon Kind=FolderSearchOutline}" />
            </ContextMenu>
        </ListBox.ContextMenu>
        <i:Interaction.Behaviors>
            <listboxEx:ListBoxScrollToBottomExtensions />
        </i:Interaction.Behaviors>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <DockPanel>
                    <TextBlock Text="{Binding Time, StringFormat={}{0:HH:mm:ss:}}" />
                    <TextBlock
                        Margin="5,0,0,0"
                        Text="{Binding Text}"
                        TextWrapping="Wrap" />
                </DockPanel>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=Degree}" Value="INFO">
                        <Setter Property="ListBoxItem.Foreground" Value="Black" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=Degree}" Value="DEBUG">
                        <Setter Property="ListBoxItem.Foreground" Value="Black" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=Degree}" Value="WARN">
                        <Setter Property="ListBoxItem.Foreground" Value="{StaticResource MessageOrangeBrush}" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=Degree}" Value="ERROR">
                        <Setter Property="ListBoxItem.Foreground" Value="{StaticResource MessageRedBrush}" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=Degree}" Value="FATAL">
                        <Setter Property="ListBoxItem.Foreground" Value="{StaticResource MessageRedBrush}" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</UserControl>
