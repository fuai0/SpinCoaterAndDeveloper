<Window
    x:Class="SpinCoaterAndDeveloper.App.Views.MainWindowView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:listBoxCancelSelected="clr-namespace:PrismAutomationPlatformExt.Extensions;assembly=PrismAutomationPlatformExt"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:valueConverter="clr-namespace:ValueConverters;assembly=ValueConverters"
    Title="{Binding MainTitle}"
    Width="1280"
    Height="768"
    prism:ViewModelLocator.AutoWireViewModel="True"
    FontFamily="微软雅黑"
    SnapsToDevicePixels="True"
    Style="{StaticResource WindowStyle.Main}"
    TextElement.FontSize="13"
    TextElement.FontWeight="Regular"
    TextOptions.TextFormattingMode="Display"
    TextOptions.TextRenderingMode="Auto"
    UseLayoutRounding="True"
    WindowStartupLocation="CenterScreen"
    WindowState="Normal"
    mc:Ignorable="d">
    <Window.Resources>
        <valueConverter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <RoutedUICommand x:Key="QuickLogin" Text="QuickLogin" />
        <RoutedUICommand x:Key="QuickLanguageChangeZhCN" Text="QuickLanguageChangeZhCN" />
        <RoutedUICommand x:Key="QuickLanguageChangeEnUS" Text="QuickLanguageChangeEnUS" />
        <RoutedUICommand x:Key="QuickLanguageChangeViVN" Text="QuickLanguageChangeViVN" />
    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding Command="{StaticResource QuickLogin}" Executed="QuickLogin_Execute" />
        <CommandBinding Command="{StaticResource QuickLanguageChangeZhCN}" Executed="QuickLanguageChangeZhCN_Execute" />
        <CommandBinding Command="{StaticResource QuickLanguageChangeEnUS}" Executed="QuickLanguageChangeEnUS_Execute" />
        <CommandBinding Command="{StaticResource QuickLanguageChangeViVN}" Executed="QuickLanguageChangeViVN_Execute" />
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Command="{StaticResource QuickLogin}" Gesture="Ctrl+Alt+I" />
        <KeyBinding Command="{StaticResource QuickLanguageChangeZhCN}" Gesture="Ctrl+Alt+C" />
        <KeyBinding Command="{StaticResource QuickLanguageChangeEnUS}" Gesture="Ctrl+Alt+E" />
        <KeyBinding Command="{StaticResource QuickLanguageChangeViVN}" Gesture="Ctrl+Alt+V" />
    </Window.InputBindings>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding WindowClosingCommand}" PassEventArgsToCommand="True" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <materialDesign:DialogHost
        x:Name="DialogHost"
        DialogTheme="Inherit"
        Identifier="Root">
        <materialDesign:DrawerHost x:Name="drawerHost" IsLeftDrawerOpen="{Binding LeftDrawerOpen}">
            <materialDesign:DrawerHost.LeftDrawerContent>
                <DockPanel MinWidth="220">
                    <StackPanel Margin="0,20" DockPanel.Dock="Top">
                        <TextBlock
                            Margin="0,10"
                            HorizontalAlignment="Center"
                            Cursor="IBeam"
                            Text="{Binding UserName}"
                            Visibility="{Binding AppleUIEnable, Converter={StaticResource BoolToVisibilityConverter}}" />
                    </StackPanel>

                    <ListBox
                        x:Name="menuBar"
                        DockPanel.Dock="Top"
                        ItemContainerStyle="{StaticResource NavigateListBoxItemStyle}"
                        ItemsSource="{Binding MenuBars}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="SelectionChanged">
                                <i:InvokeCommandAction Command="{Binding NavigateCommand}" CommandParameter="{Binding SelectedItem, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListBox}}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <i:Interaction.Behaviors>
                            <listBoxCancelSelected:ListBoxCancelSelectedExtensions />
                        </i:Interaction.Behaviors>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel
                                    VerticalAlignment="Center"
                                    Background="Transparent"
                                    Orientation="Horizontal">
                                    <materialDesign:PackIcon Margin="15,0" Kind="{Binding Icon}" />
                                    <TextBlock Margin="10,0" Text="{Binding Title}" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <ContentControl prism:RegionManager.RegionName="MainWindowLeftDrawerHostRegion" DockPanel.Dock="Top" />
                </DockPanel>
            </materialDesign:DrawerHost.LeftDrawerContent>

            <Grid Background="{StaticResource LightGreyBackgroundBrush}" TextElement.Foreground="{StaticResource AppleMidTextForegroundBrush}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <ContentControl Grid.Row="0" prism:RegionManager.RegionName="MainViewAppleNavigateRegion" />
                <ContentControl Grid.Row="1" prism:RegionManager.RegionName="MainViewRegion" />
                <materialDesign:Snackbar
                    x:Name="Snackbar"
                    Grid.Row="1"
                    MessageQueue="{Binding GlobalMessageQueue}" />
            </Grid>
        </materialDesign:DrawerHost>
    </materialDesign:DialogHost>
</Window>
